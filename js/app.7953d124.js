(function(t){function e(e){for(var s,a,i=e[0],c=e[1],u=e[2],m=0,d=[];m<i.length;m++)a=i[m],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},o={app:0},n=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/h_liwei_pages_m/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"07bb":function(t,e,r){},"22de":function(t,e,r){"use strict";var s=r("25be"),o=r.n(s);o.a},"25be":function(t,e,r){},3593:function(t,e,r){},"4d1a":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var s=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],a=(r("a6ca"),r("b0a0"),r("2877")),i={},c=Object(a["a"])(i,o,n,!1,null,"5852fa1a",null),u=c.exports,l=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticStyle:{height:"100vh"}},[r("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"15%"}},[r("el-form",{staticClass:"leftSearch"},[r("el-input",{attrs:{placeholder:"Search"},model:{value:t.roomSearchNumber,callback:function(e){t.roomSearchNumber=e},expression:"roomSearchNumber"}},[r("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},slot:"append"})],1)],1),t._l(t.room_visitor_data,function(e,s){return r("div",{key:s},[r("router-link",{attrs:{to:"/chats/"+e.vsocketid},nativeOn:{click:function(r){return t.setCurrentChating(e)}}},["refused"!=e.roomstate?r("RoomBar",{attrs:{checked:t.isselected(e.vsocketid),roomdata:e,unreadnum:t.createroominfotext(e.roomstate)}}):t._e()],1)],1)})],2),r("el-container",[r("el-header",{staticStyle:{"text-align":"left","font-size":"12px"}},[r("div",{staticClass:"v_header",staticStyle:{display:"flex"}},[r("div",{staticClass:"roomid"},[""!=t.currentChatText.roomid?r("span",[r("i",{staticClass:"el-icon-s-home"}),t._v("Room "+t._s(t.currentChatText.roomid))]):t._e()]),r("div",{staticClass:"visitor"},[""!=t.currentChatText.visitorname?r("p",{staticClass:"name"},[r("i",{staticClass:"el-icon-s-custom"}),t._v(t._s(t.currentChatText.visitorname)+"\n              ")]):t._e(),""!=t.currentChatText.des?r("p",{staticClass:"desc"},[r("i",{staticClass:"el-icon-info"}),t._v(t._s(t.currentChatText.des)+"\n                      "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.TEXT_NO_AUTH,placement:"bottom-end"},nativeOn:{click:function(e){return t.authornot("no",t.currentChatText.vsocketid)}}},["Visitor is requesting your authentication"==t.currentChatText.des?r("i",{staticClass:"auth-no el-icon-error"}):t._e()]),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.TEXT_YES_AUTH,placement:"bottom-end"},nativeOn:{click:function(e){return t.authornot("yes",t.currentChatText.vsocketid)}}},["Visitor is requesting your authentication"==t.currentChatText.des?r("i",{staticClass:"auth-yes el-icon-success"}):t._e()])],1):t._e()]),""!=t.currentChatText.roomid?r("div",{staticClass:"manager"},[r("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(e){return t.close_conv(t.currentChatText.vsocketid)}}})],1):t._e()])]),r("el-main",[r("router-view",{key:t.key})],1)],1),r("el-aside",{staticClass:"panel_order",attrs:{width:"30%"}},t._l(t.refreashQuery,function(t,e){return r("OrderPanel",{key:e,attrs:{servises:t}})}),1)],1)},d=[],f=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("3b8d")),h=(r("a481"),r("bd86")),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"roombar",class:{checked:t.checked}},[r("el-row",{attrs:{type:"flex"}},[r("el-col",{attrs:{span:1}},["connected"==t.roomdata.roomstate?r("i",{staticClass:"el-icon-connection",staticStyle:{color:"#409EFF"}}):t._e(),"offline"==t.roomdata.roomstate?r("i",{staticClass:"el-icon-link",staticStyle:{color:"#909399"}}):t._e(),"request_auth"==t.roomdata.roomstate?r("i",{staticClass:"el-icon-loading",staticStyle:{color:"#E6A23C"}}):t._e(),"chating"==t.roomdata.roomstate?r("i",{staticClass:"el-icon-chat-dot-square",staticStyle:{color:"#67C23A"}}):t._e(),r("el-badge",{staticClass:"item",attrs:{value:t.unreadnum}})],1),r("el-col",{staticClass:"roominfo",attrs:{span:16,justify:"center"}},[r("p",{staticClass:"roomid"},[r("i",{staticClass:"el-icon-s-home"}),t._v(t._s(t.roomdata.roomid)+" "),r("span",[t._v("@"+t._s(t.roomdata.visitorname))])])]),r("el-col",{attrs:{span:7}},[r("p",{staticClass:"time"},[t._v(t._s(t.roomdata.time))]),r("p",{staticClass:"date"},[t._v(t._s(t.roomdata.date))])])],1),r("el-divider")],1)},v=[],g={name:"RoomBar",props:["roomdata","unreadnum","checked"]},_=g,b=(r("866f"),Object(a["a"])(_,p,v,!1,null,"0d98b95a",null)),y=b.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chatpanel"},[r("UserMessage",{staticClass:"usermessage",attrs:{socketid:t.socketid}}),r("UserText",{staticClass:"usertext",attrs:{socketid:t.socketid}})],1)},C=[],k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"uesrtext"}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textsend2visitor,expression:"textsend2visitor"}],attrs:{placeholder:"Press 'Ctrl + Enter' Send Message"},domProps:{value:t.textsend2visitor},on:{keyup:t.addMessage,input:function(e){e.target.composing||(t.textsend2visitor=e.target.value)}}}),r("el-button",{staticClass:"sendmessage",attrs:{type:"success"},on:{click:t.translate}},[t._v("send")])],1)},x=[],w=r("5a0c"),j=r.n(w),T=r("2f62"),L=(r("7f7f"),r("768b"));s["default"].use(T["a"]);var M=new T["a"].Store({state:{roomVisitorData:{},messageM2C:[],messageC2M:[],messageALL:{},servisesQuery:[]},getters:{ALLmessage:function(t){return t.messageALL}},mutations:{setRoomVisData:function(t,e){t.roomVisitorData=e},saveMessageM2C:function(t,e){t.messageM2C.push(e)},saveMessageC2M:function(t,e){t.messageC2M.push(e)},saveMessageALL:function(t,e){var r=Object(L["a"])(e,2),o=r[0],n=r[1];void 0==t.messageALL[o]?(s["default"].set(t.messageALL,o,[]),t.messageALL[o].push(n)):t.messageALL[o].push(n)},clearMessageM2C:function(t){t.messageM2C=[]},clearMessageC2M:function(t){t.messageC2M=[]},clearMessageALL:function(t){t.messageALL={}},addserQuery:function(t,e){t.servisesQuery.push(e)}},actions:{setRoomVisData:function(t,e){t.commit("setRoomVisData",e)},saveMessageM2C:function(t,e){t.commit("saveMessageM2C",e)},saveMessageC2M:function(t,e){t.commit("saveMessageC2M",e)},clearMessageM2C:function(t){t.commit("clearMessageM2C")},clearMessageC2M:function(t){t.commit("clearMessageC2M")},saveMessageALL:function(t,e){var r=Object(L["a"])(e,2),s=r[0],o=r[1];t.commit("saveMessageALL",[s,o])},clearMessageALL:function(t){t.commit("clearMessageALL")},addserQuery:function(t,e){t.commit("addserQuery",e)}}});function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(r,!0).forEach(function(e){Object(h["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var S={props:{socketid:{}},name:"uesrtext",data:function(){return{textsend2visitor:"",textFromEn2Ch:""}},store:M,computed:E({},Object(T["c"])({roomVisitorData:function(t){return t.roomVisitorData},messageALL:function(t){return t.messageALL}})),created:function(){},methods:E({},Object(T["b"])(["setRoomVisData","saveMessageALL","clearMessageALL"]),{addMessage:function(t){t.ctrlKey&&13===t.keyCode&&this.textsend2visitor.length&&this.translate()},translate:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/translate/baidu",{query:this.textsend2visitor,type:"en2ch"});case 2:e=t.sent,this.textFromEn2Ch=e.data[0].dst,this.post();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),post:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e,r){var s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:s=j()(),o={created:s,date:s.format("MMM D"),time:s.format("HH:mm"),ot:this.textsend2visitor,tt:this.textFromEn2Ch,dir:"m2c",visitorinfo:{roomid:this.roomVisitorData[this.socketid].roomid,visitorName:this.roomVisitorData[this.socketid].visitorname,vsocketid:this.socketid}},this.$socket.emit("message_m_to_v",o),this.saveMessageALL([this.socketid,o]),console.log("message [send]\n","room:".concat(o.visitorinfo.roomid,",visitorname:").concat(o.visitorinfo.visitorName,",vsocketid:").concat(o.visitorinfo.vsocketid,",")),console.log("原文：".concat(o.ot,"，译文：").concat(o.tt)),console.log(this.messageALL[this.socketid].length),this.textsend2visitor="";case 8:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}()})},D=S,A=(r("df8b"),Object(a["a"])(D,k,x,!1,null,"6b96c842",null)),R=A.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"message"}},t._l(t.refreashmessage,function(e,s){return r("div",{key:s},[r("p",{staticClass:"time"},[r("span",[t._v(t._s(t.timeformat(e.created)))])]),r("el-row",{attrs:{type:"flex"}},["m2c"==e.dir?r("el-col",{attrs:{span:24}},[r("div",{staticClass:"manager"},[r("i",{staticClass:"uico el-icon-s-home"},[t._v("Front Desk")]),r("p",{staticClass:"texto"},[t._v(t._s(e.ot))]),r("p",{staticClass:"textt"},[t._v(t._s(e.tt))])])]):t._e(),"c2m"==e.dir?r("el-col",{staticStyle:{display:"flex","flex-direction":"row-reverse"},attrs:{span:24}},[r("div",{staticClass:"visitor"},[r("i",{staticClass:"uico el-icon-s-custom"},[t._v("Room "+t._s(e.visitorinfo.roomid))]),r("p",{staticClass:"texto"},[t._v(t._s(e.ot))]),r("p",{staticClass:"textt"},[t._v(t._s(e.tt))])])]):t._e()],1)],1)}),0)},V=[];function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(r,!0).forEach(function(e){Object(h["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var U={props:{socketid:""},name:"message",data:function(){return{messagelist:[]}},methods:Q({},Object(T["b"])(["setRoomVisData","saveMessageALL","clearMessageALL"]),{timeformat:function(t){return j()(t).add(8,"hour").locale("zh-cn")},scrollToBottom:function(){this.$nextTick(function(){var t=document.getElementById("message");t.scrollTop=t.scrollHeight})}}),created:function(){},computed:Q({},Object(T["c"])({roomVisitorData:function(t){return t.roomVisitorData},messageALL:function(t){return t.messageALL}}),{refreashmessage:function(){return this.scrollToBottom(),this.messageALL[this.socketid]}}),watch:{}},H=U,X=(r("6a45"),Object(a["a"])(H,$,V,!1,null,"02bed3a4",null)),F=X.exports;function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(r,!0).forEach(function(e){Object(h["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var I={props:{socketid:{}},data:function(){return{messagelist:[]}},components:{UserText:R,UserMessage:F},methods:B({},Object(T["b"])(["setRoomVisData","saveMessageALL","clearMessageALL"]),{fetch:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.id?this.id:100,t.next=3,this.$http.get("chats/rooms?room=".concat(e));case 3:r=t.sent,this.messagelist=r.data;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),store:M,computed:B({},Object(T["c"])({roomVisitorData:function(t){return t.roomVisitorData},messageALL:function(t){return t.messageALL}})),created:function(){}},J=I,z=(r("ccbc"),Object(a["a"])(J,O,C,!1,null,"233129c5",null)),K=z.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return 0==t.servises.ignore?r("div",{staticClass:"orderpanel"},[r("el-row",{attrs:{type:"flex"}},[r("el-col",{attrs:{span:24,justify:"center"}},[r("el-col",{staticClass:"title",attrs:{span:24}},[t._v("Room "+t._s(t.servises.roomid)+" -"+t._s(t.servises.visitorname)+"\n                    "),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return e.preventDefault(),t.delservices(t.servises)}}},[r("i",{staticClass:"el-icon-delete"}),t._v("delete")])],1),r("el-col",{attrs:{span:18}},["menu"==t.servises.type?r("div",t._l(t.servises.content,function(e,s){return r("p",{key:s,staticClass:"menuitem"},[t._v(t._s(e.nameEN)+" x "+t._s(e.number)+" ")])}),0):t._e(),"fix"==t.servises.type?r("div",[r("p",{staticClass:"fixitem"},[t._v("Has Problem of ("+t._s(t.servises.content.join("、"))+") ")])]):t._e(),"order"==t.servises.type?r("div",[r("p",{staticClass:"orderitem"},[t._v("Want Order "+t._s(t.servises.content)+" ")])]):t._e()]),r("el-col",{attrs:{span:6}},[r("p",{staticClass:"time"},[t._v(t._s(t.servises.time))]),r("p",{staticClass:"date"},[t._v(t._s(t.servises.date))]),r("input",{staticStyle:{width:"40px",height:"40px"},attrs:{type:"checkbox"}}),r("p",[t._v("DONE")])])],1)],1),r("el-divider",{staticStyle:{margin:"5px"}})],1):t._e()},W=[];r("ac4d"),r("8a81");function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(r,!0).forEach(function(e){Object(h["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var tt={name:"RoomBar",props:["servises"],data:function(){return{checked:!0}},computed:Z({},Object(T["c"])({servisesQuery:function(t){return t.servisesQuery}})),methods:Z({},Object(T["b"])(["addserQuery"]),{delservices:function(t){var e=JSON.parse(localStorage.getItem("order")),r=!0,s=!1,o=void 0;try{for(var n,a=this.servisesQuery.keys()[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var i=n.value;if(this.servisesQuery[i]==t){this.servisesQuery[i].ignore=!0;var c=this.servisesQuery[i].roomid;e[c].ignore=!0,localStorage.setItem("order",JSON.stringify(e))}}}catch(u){s=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(s)throw o}}console.log(this.servisesQuery),console.log(e)}})},et=tt,rt=(r("e7dc"),Object(a["a"])(et,Y,W,!1,null,"fcfe7016",null)),st=rt.exports;function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(r,!0).forEach(function(e){Object(h["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var at={components:{RoomBar:y,ChatPanel:K,OrderPanel:st},data:function(){return{TEXT_AUTH:"Visitor is requesting your authentication",TEXT_CONN:"Visitor is logining",TEXT_OFF:"Visitor is offline",TEXT_CHAT:"Visitor is chating",TEXT_YES_AUTH:"Click YES continue the conversation.",TEXT_NO_AUTH:" Click NO kick out the user, one message will send to the user.",roomSearchNumber:null,update:Object,m_socket_id:"",room_visitor_data:{},buffer:"",currentChatText:{roomid:"",visitorname:"",vsocketid:"",des:""}}},sockets:{connect:function(){console.log("manager socket connected")},disconnect:function(){console.log("manager socket disconnected")},handshake_server_to_manager:function(t){this.m_socket_id=t},heartbeat_server_to_manager:function(t){},visitor_state_server_to_manager:function(t){var e=t.vsocketid,r=j()(),s={roomid:t.roomid,roomstate:t.roomstate,visitorname:t.visitorname,vsocketid:t.vsocketid,stateChanged:t.stateChanged,date:j()(r).format("MMM D"),time:j()(r).format("HH:mm")};void 0==this.room_visitor_data[e]&&(this.$set(this.room_visitor_data,e,s),this.setRoomVisData(this.room_visitor_data)),this.$set(this.room_visitor_data,e,s),s.stateChanged&&this.setRoomVisData(this.room_visitor_data)},auth_request_to_manager:function(t){var e="Room".concat(t.roomid," Request"),r="Auth name is:".concat(t.visitorname);this.$notify({title:e,message:r,type:"info",duration:5e3})},visitor_closed_to_manager:function(t){try{this.room_visitor_data[t].roomstate="offline",this.room_visitor_data[t].stateChanged=!0,this.setRoomVisData(this.room_visitor_data),this.room_visitor_data[t].stateChanged=!1}catch(e){console.log("error")}},servermessage_v_to_m:function(t){console.log("message [get]\n","room:".concat(t.visitorinfo.roomid,",visitorname:").concat(t.visitorinfo.visitorName,",vsocketid:").concat(t.visitorinfo.vsocketid,",")),console.log("原文：".concat(t.ot,"，译文：").concat(t.tt)),this.saveMessageALL([t.visitorinfo.vsocketid,t])},needservices_fix_to_manager:function(t){console.log(t);var e=JSON.parse(localStorage.getItem("order"))||{};e[t.roomid]=t,localStorage.setItem("order",JSON.stringify(e)),this.addserQuery(t)},needservices_order_to_manager:function(t){console.log(t);var e=JSON.parse(localStorage.getItem("order"))||{};e[t.roomid]=t,localStorage.setItem("order",JSON.stringify(e)),this.addserQuery(t)}},methods:nt({},Object(T["b"])(["setRoomVisData","saveMessageALL","clearMessageALL","addserQuery"]),{setCurrentChating:function(t){console.log("click in ",this.$route.path);var e=t.roomstate,r="";r="connected"==e?this.TEXT_CONN:"request_auth"==e?this.TEXT_AUTH:"offline"==e?this.TEXT_OFF:"chating"==e?this.TEXT_CHAT:"",this.currentChatText.roomid=t.roomid,this.currentChatText.visitorname=t.visitorname,this.currentChatText.vsocketid=t.vsocketid,this.currentChatText.des=r},isselected:function(t){return t==this.currentChatText.vsocketid},close_conv:function(t){this.$socket.emit("v_conv_closed",t),this.room_visitor_data[t].roomstate="refused",this.setRoomVisData(this.room_visitor_data),this.currentChatText={roomid:"",visitorname:"",vsocketid:"",des:""},this.$router.replace("/")},changeCurrentChating:function(t){var e="";e="connected"==t?this.TEXT_CONN:"request_auth"==t?this.TEXT_AUTH:"offline"==t?this.TEXT_OFF:"chating"==t?this.TEXT_CHAT:"",this.currentChatText.des=e},createroominfotext:function(t){return"connected"==t?"Con":"request_auth"==t?"Auth":"offline"==t?"Off":"chating"==t?"Chat":void 0},authornot:function(t,e){"no"==t?(this.$socket.emit("v_auth_refused",e),this.room_visitor_data[e].roomstate="refused",this.setRoomVisData(this.room_visitor_data),this.currentChatText={roomid:"",visitorname:"",vsocketid:"",des:""},this.$message({type:"error",message:"kick out user"})):"yes"==t&&(this.$socket.emit("v_auth_allowed",e),this.room_visitor_data[e].roomstate="chating",this.setRoomVisData(this.room_visitor_data),this.currentChatText.des="chating",this.$message({type:"success",message:"start conversation"}))},show_order_menus_today:function(){var t=JSON.parse(localStorage.getItem("order")),e=j()().format("MMM D");if(console.log(e),t)for(var r in t)t[r].date==e&&0==t[r].ignore&&(console.log(t[r]),this.addserQuery(t[r]))},fetch:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("chats/rooms/latest/".concat(e));case 2:r=t.sent,r.data[0].updated;case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handshake:function(){this.$socket.emit("handshake-manager")},heartbeat:function(){var t=this;setInterval(function(){t.$socket.emit("heartbeat-manager")},500)}}),store:M,computed:nt({},Object(T["c"])({roomVisitorData:function(t){return t.roomVisitorData},messageALL:function(t){return t.messageALL},servisesQuery:function(t){return t.servisesQuery}}),{refreashQuery:function(){return this.servisesQuery},key:function(){return this.$route.path+Math.random()}}),created:function(){this.show_order_menus_today(),this.handshake(),this.heartbeat()}},it=at,ct=(r("22de"),Object(a["a"])(it,m,d,!1,null,null,null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",[t._v(t._s(t.id?"edit":"create")+" room")]),r("el-form",{nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[r("el-form-item",{attrs:{label:"Room number"}},[r("el-input",{attrs:{placeholder:"Please input Room number"},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("Save")])],1)],1)],1)},mt=[],dt={props:{id:{}},data:function(){return{model:{}}},methods:{save:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.id){t.next=6;break}return t.next=3,this.$http.put("rest/rooms/".concat(this.id),this.model);case 3:t.sent,t.next=9;break;case 6:return t.next=8,this.$http.post("rest/rooms",this.model);case 8:t.sent;case 9:this.$router.push("/rooms/list"),this.$message({type:"success",message:"save success"});case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetch:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("rest/rooms/".concat(this.id));case 2:e=t.sent,this.model=e.data;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.id&&this.fetch()}},ft=dt,ht=Object(a["a"])(ft,lt,mt,!1,null,null,null),pt=ht.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("el-table",{attrs:{data:t.items}},[r("el-table-column",{attrs:{prop:"_id",label:"ID",width:"300"}}),r("el-table-column",{attrs:{prop:"name",label:"Room number"}}),r("el-table-column",{attrs:{fixed:"right",label:"setting",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return t.$router.push("/rooms/edit/"+e.row._id)}}},[t._v("Edit")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return t.remove(e.row)}}},[t._v("Delete")])]}}])})],1)],1)},gt=[],_t={data:function(){return{items:[]}},methods:{fetch:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("rest/rooms");case 2:e=t.sent,this.items=e.data;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),remove:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(e),this.$confirm("Delete room ".concat(e.name,", y/n?"),"notice",{confirmButtonText:"yes",cancelButtonText:"no",type:"warning"}).then(Object(f["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$http.delete("rest/rooms/".concat(e._id));case 2:t.sent,r.$message({type:"success",message:"success!"}),r.fetch();case 5:case"end":return t.stop()}},t)})));case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.fetch()}},bt=_t,yt=Object(a["a"])(bt,vt,gt,!1,null,null,null),Ot=yt.exports;s["default"].use(l["a"]);var Ct=new l["a"]({mode:"hash",base:"/h_liwei_pages_m/",routes:[{path:"/",name:"Main",component:ut,children:[{path:"/rooms/create",component:pt},{path:"/rooms/edit/:id",component:pt,props:!0},{path:"/rooms/list",component:Ot},{path:"/chats/:socketid",component:K,props:!0}]}]}),kt=r("5c96"),xt=r.n(kt);r("0fae");s["default"].use(xt.a);var wt=r("bc3a"),jt=r.n(wt),Tt=jt.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/h_liwei_pages_m/"}).VUE_APP_API_URL||"https://www.tourismchina.cn/manager/api"}),Lt=Tt,Mt=r("5132"),Pt=r.n(Mt),Et=Object({NODE_ENV:"production",BASE_URL:"/h_liwei_pages_m/"}).VUE_APP_SOCKET_URL||"https://www.tourismchina.cn";s["default"].use(new Pt.a({debug:!1,connection:Et,vuex:{store:M,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),s["default"].config.productionTip=!1,s["default"].prototype.$http=Lt,new s["default"]({router:Ct,store:M,render:function(t){return t(u)}}).$mount("#app")},"6a27":function(t,e,r){},"6a45":function(t,e,r){"use strict";var s=r("3593"),o=r.n(s);o.a},"866f":function(t,e,r){"use strict";var s=r("6a27"),o=r.n(s);o.a},"9a41":function(t,e,r){},a02f:function(t,e,r){},a6ca:function(t,e,r){"use strict";var s=r("4d1a"),o=r.n(s);o.a},b0a0:function(t,e,r){"use strict";var s=r("07bb"),o=r.n(s);o.a},bbc0:function(t,e,r){},ccbc:function(t,e,r){"use strict";var s=r("9a41"),o=r.n(s);o.a},df8b:function(t,e,r){"use strict";var s=r("bbc0"),o=r.n(s);o.a},e7dc:function(t,e,r){"use strict";var s=r("a02f"),o=r.n(s);o.a}});